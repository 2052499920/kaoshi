webpackJsonp([7],{iztF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("div",{staticClass:"add"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("新增教材")])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows}},[a("el-table-column",{attrs:{label:"教材名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.teachName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"职业工种",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.jobCode+"-"+t.row.jobName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"职业等级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.levelInfo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{color:"#f8902a"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-sizes":[5,10,15,20],"page-size":5,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"新增教材",visible:e.show,width:"600px","close-on-click-modal":!1},on:{close:function(t){return e.cancel("ruleForm")},"update:visible":function(t){e.show=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"职业工种","label-width":"80px",prop:"jobId"}},[a("el-select",{attrs:{placeholder:"请选择职业工种"},model:{value:e.form.jobId,callback:function(t){e.$set(e.form,"jobId",t)},expression:"form.jobId"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.jobCode+"-"+e.jobName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职业等级",prop:"level","label-width":"80px"}},[a("el-checkbox-group",{model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("一级")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("二级")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("三级")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("四级")]),e._v(" "),a("el-checkbox",{attrs:{label:"5"}},[e._v("五级")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"教材名称",prop:"teachName","label-width":"80px"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入教材名称",autocomplete:"off"},model:{value:e.form.teachName,callback:function(t){e.$set(e.form,"teachName",t)},expression:"form.teachName"}})],1)],1),e._v(" "),a("div",{staticClass:"tijiao",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancel("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("ruleForm")}}},[e._v("提 交")])],1)],1)],1),e._v(" "),a("div",[a("div",[a("el-dialog",{attrs:{title:"编辑教材",visible:e.showa,width:"600px","close-on-click-modal":!1},on:{close:function(t){return e.cancela("ruleForma")},"update:visible":function(t){e.showa=t}}},[a("el-form",{ref:"ruleForma",attrs:{model:e.forma,rules:e.rulesa}},[a("el-form-item",{attrs:{label:"职业工种","label-width":"80px",prop:"jobId"}},[a("el-select",{attrs:{placeholder:"请选择职业工种"},model:{value:e.forma.jobId,callback:function(t){e.$set(e.forma,"jobId",t)},expression:"forma.jobId"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.jobCode+"-"+e.jobName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职业等级",prop:"level","label-width":"80px"}},[a("el-checkbox-group",{model:{value:e.forma.level,callback:function(t){e.$set(e.forma,"level",t)},expression:"forma.level"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("一级")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("二级")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("三级")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("四级")]),e._v(" "),a("el-checkbox",{attrs:{label:"5"}},[e._v("五级")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"教材名称",prop:"teachName","label-width":"80px"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入教材名称",autocomplete:"off"},model:{value:e.forma.teachName,callback:function(t){e.$set(e.forma,"teachName",t)},expression:"forma.teachName"}})],1)],1),e._v(" "),a("div",{staticClass:"tijiao",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return t.stopPropagation(),e.cancela("ruleForma")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submita("ruleForma")}}},[e._v("提 交")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nav"},[t("div",[this._v("教材管理")])])}]};var l=a("C7Lr")({name:"",props:{},data:function(){return{show:!1,showa:!1,form:{jobId:"",level:[],teachName:"",id:""},forma:{jobId:"",level:[],teachName:"",id:""},options:[],rules:{jobId:[{required:!0,message:"职业工种不能为空",trigger:"blur"}],level:[{required:!0,message:"职业等级不能为空",trigger:"blur"}],teachName:[{required:!0,message:"教材名称不能为空",trigger:"blur"}]},rulesa:{jobId:[{required:!0,message:"职业工种不能为空",trigger:"blur"}],level:[{required:!0,message:"职业等级不能为空",trigger:"blur"}],teachName:[{required:!0,message:"教材名称不能为空",trigger:"blur"}]},tableData:[],getFrom:{jobId:"",level:[],teachName:"",pageNo:1,pageSize:5}}},components:{},methods:{add:function(){this.show=!0},cancel:function(e){this.$refs.ruleForm.resetFields(),this.show=!1},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("表单填写不完整"),!1;t.form.level=t.form.level.sort().toString(),t.$api.saveTeaching(t.form).then(function(e){0==e.code?(t.$refs.ruleForm.resetFields(),t.show=!1,t.getTextbookList(),t.$message.success(e.msg)):(t.form.level=t.form.level.split(","),t.$message.error(e.msg))})})},getTextbookList:function(){var e=this;this.$api.getTextbook(this.getFrom).then(function(t){0==t.code&&(e.tableData=t.data)})},handleEdit:function(e,t){this.forma.id=t.id,this.forma=t,this.forma.level=this.forma.level.split(","),this.showa=!0},cancela:function(e){this.forma.level=this.forma.level.toString(),this.showa=!1},submita:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("表单填写不完整"),!1;t.forma.level=t.forma.level.sort().toString(),t.$api.saveTeaching(t.forma).then(function(e){0==e.code?(t.showa=!1,t.getTextbookList(),t.$message.success(e.msg)):t.$message.error(e.msg)})})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该教材, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$api.delTeaching(t.id).then(function(e){0==e.code?(a.$message.success(e.msg),a.getTextbookList()):a.$message.error(e.msg)})}).catch(function(){a.$message({type:"info",message:"取消删除"})})},handleSizeChange:function(e){this.getFrom.pageSize=e,this.getTextbookList()},handleCurrentChange:function(e){this.getFrom.pageNo=e,this.getTextbookList()}},created:function(){var e=this;this.$api.getJobfindJob().then(function(t){0==t.code&&(e.options=t.data)}),this.getTextbookList()},computed:{},watch:{}},o,!1,function(e){a("yc3u")},"data-v-56202eba",null);t.default=l.exports},yc3u:function(e,t){}});
//# sourceMappingURL=7.60a4edf980917ebd7d9f.js.map